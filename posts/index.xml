<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Posts on Matthew&#39;s Blog</title>
    <link>https://kosnamm.github.io/posts/</link>
    <description>Recent content in Posts on Matthew&#39;s Blog</description>
    <image>
      <title>Matthew&#39;s Blog</title>
      <url>https://kosnamm.github.io/tn.png</url>
      <link>https://kosnamm.github.io/tn.png</link>
    </image>
    <generator>Hugo -- 0.148.2</generator>
    <language>en-us</language>
    <lastBuildDate>Sat, 01 Nov 2025 16:25:41 +0800</lastBuildDate>
    <atom:link href="https://kosnamm.github.io/posts/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Setup Docker on MacOS</title>
      <link>https://kosnamm.github.io/posts/docker-setup-on-macos/</link>
      <pubDate>Sat, 01 Nov 2025 16:25:41 +0800</pubDate>
      <guid>https://kosnamm.github.io/posts/docker-setup-on-macos/</guid>
      <description>&lt;p&gt;MacOS在企业端使用docker desktop受限，docker服务端无法启动导致docker服务端的一般能力无法使用。虽然大多数时候docker编译构建已经被流水线或自动化脚本等托管，但是在学习初期或调试阶段仍然需要在本地制作镜像或运行容器。
因此，本教程选择使用colima代替docker desktop。&lt;/p&gt;
&lt;p&gt;&lt;em&gt;colima会利用lima(linux on Mac)虚拟机，在lima中启动docker服务，让本地的docker-cli直接访问lima虚拟机中的docker服务，从而绕开docker服务在MacOS本地无法启动的问题。&lt;/em&gt;&lt;/p&gt;
&lt;h1 id=&#34;prepare&#34;&gt;Prepare&lt;/h1&gt;
&lt;p&gt;安装需要的组件：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# docker &amp;amp; colima on mac&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;brew install --cask docker
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;brew install colima
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;brew install docker-compose
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;brew install colima&lt;/code&gt;的时候会自动安装&lt;code&gt;lima&lt;/code&gt;，如果&lt;code&gt;lima&lt;/code&gt;已经被安装则会跳过该部分的安装。&lt;/p&gt;
&lt;h1 id=&#34;lima--colima&#34;&gt;lima &amp;amp; colima&lt;/h1&gt;
&lt;p&gt;colima依赖于&lt;a href=&#34;https://github.com/lima-vm/lima&#34;&gt;lima&lt;/a&gt;(Linux on mac)，通过lima启动Linux虚拟机让docker客户端访问虚拟机中的docker服务，从而使得docker对用户提供的一般能力可以正常使用。&lt;/p&gt;
&lt;h2 id=&#34;lima的相关使用&#34;&gt;Lima的相关使用&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 启动一个default linux虚拟机&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;limactl start default
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 查看当前linux虚拟机&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;limactl list
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 进入虚拟机的shell换将&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;limactl shell default
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;lima会默认挂载在mac的根目录下，即全部目录，进入linux shell后可以访问mac的全部目录。
&lt;em&gt;通过修改配置文件的方式修改挂载目录&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 进入默认linux虚拟机的dir&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; ~/.lima/default
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 修改lima.yaml文件的挂载目录&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;vim lima.yaml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img alt=&#34;picture&#34; loading=&#34;lazy&#34; src=&#34;https://kosnamm.github.io/dockersetup/lima_config.png&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;run&#34;&gt;Run！&lt;/h1&gt;
&lt;p&gt;首先启动colima保证docker服务启动&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;colima start --cpu &lt;span class=&#34;m&#34;&gt;4&lt;/span&gt; --memory &lt;span class=&#34;m&#34;&gt;6&lt;/span&gt; --disk &lt;span class=&#34;m&#34;&gt;60&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;使用docker&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
